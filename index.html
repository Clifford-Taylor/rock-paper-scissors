<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
</head>
<body>
<script>
let win
let pscore = 0
let cscore = 0
let maxrounds = 5
const choices = ["rock", "paper", "scissors"]
let playerchoice

console.log("Welcome to a game of Rock-Paper-Scissors!\nGame Mode: 5 Rounds.")


for(let i = 1; i < maxrounds+1; i++){
    console.log("\nRound:"+i)
    if(i === maxrounds){console.log("Final Round!")}

    playerchoice = prompt("Make your choice.\nChoose Rock, Paper, or Scissors").toLowerCase()
    while (choices.find(validate) === undefined){
        alert("Please enter a proper choice!")
        playerchoice = prompt("Make your choice.\nChoose Rock, Paper, or Scissors").toLowerCase()       
    }
    
    play(playerchoice, getComputerChoice())

    if(win != undefined && win != "none"){
        console.log(win+" has won this round!")
    }else if(win === "none"){console.log("This round ended in a tie!")}

    console.log(`Current Score:\nPlayer:${pscore}\nComputer:${cscore}`)

    if(i === 5){
        if(pscore === cscore){console.log("\nThe game ended in a tie!")}
        else if(pscore > cscore){console.log("\nPlayer has won the game!")}
        else if(pscore < cscore){console.log("\nComputer has won the game!")}
        else{console.log("\nUhh?")}
    }
}
//prompt("Make your choice.\nChoose Rock, Paper, or Scissors").toLowerCase()
function validate(currentValue, index, arr){
    return currentValue === playerchoice
}
function getComputerChoice(){
   let index = Math.floor(Math.random()*choices.length)
   return choices[index]
}

function play(p, c){
    if(p === c){win = "none"}
    else if(p === "rock" && c === "paper"){win = "Computer"; cscore++;}
    else if(p === "rock" && c === "scissors"){win = "Player"; pscore++;}
    else if(p === "paper" && c === "rock"){win = "Player"; pscore++;}
    else if(p === "paper" && c === "scissors"){win = "Computer"; cscore++;}
    else if(p === "scissors" && c === "paper"){win = "Player"; pscore++;}
    else if(p === "scissors" && c === "rock"){win = "Computer"; cscore++;}
    else{win = undefined}
}

</script>
</body>
</html>